<!-- AdminArea -->
<div ng-controller="AdminAreaCtrl">
	<div class="extended-wrap">
		<div class="admin-bar"><span ng-show="user.email">{{user.email}} | <a ng-click="logout()">Logout</a></span></div>
		<!-- The container is a centered 960px -->
		<div class="container content-wrap">
			<div class="sixteen columns">
				<div class="row">
					<div class="three columns alpha">
						&nbsp;
					</div>
					<!-- logo -->
					<div class="thirteen columns omega">
						<a href="http://app.userballot.com/"><img class="logo" src="img/logo.png" alt="" width="120"></a>
					</div>
				</div>
			</div>
			<!-- Give column value in word form (one, two..., twelve) -->
			<div class="sixteen columns">
				<div class="row">
					<div class="three columns alpha">
		              <!-- <a class="main-nav-item" href="#">Dashboard</a> -->
		              <a class="main-nav-item" href="#" id="helpBlockShow">How It Works</a>
		              <a class="main-nav-item" href="#" id="settingsBlockShow">Settings</a>
					</div>
					<div class="twelve columns omega">
						<div id="helpBlock" class="card-wrap hide">
							<a href="" class="close right">Hide</a>
							<br class="clear" />

							<!-- step 1 -->
							<h2 class="emphasis-heading instruction">First, copy and paste the following code into your site.</h2>

							<textarea readonly style="font-size: 12px;" class="topcoat-textarea code-provider active" rows="3" cols="" placeholder="">
<!-- UserBallot: Add this before the closing body tag  -->
<script type="text/javascript">var $ub = window.$ub || {};$ub.siteId = '{{site.id}}';</script><script src="http://app.userballot.com/client.js"></script></textarea>

							<strong class="small-instruction-text">Paste this code directly before the closing <code>body</code> tag of your site.</strong><br><br>

							<!-- step 2 -->
							<h2 class="emphasis-heading instruction">Now you're ready to start adding the questions you want answered.</h2>
							<p>Make sure you ask simple yes or no questions and keep them short (140 characters or less). Once a question has been answered by a user, it will not be shown to them again.</p>
							<p><strong>Important:</strong> Questions CAN'T be answered until you set them to <i>Active</i>.</p>
							<p>That's it! <i>Active</i> questions will be visible to your users and the answers they provide will be reported to you in real-time.</p>


						</div>
						<div id="settingsBlock" class="card-wrap hide">
							<a href="" class="close right">Hide</a>
							<br class="clear" />

							<h2 class="emphasis-heading">Site Settings</h2>
							<div class="line-item">
								<form name="sitesettings">
								Wait how many days between asking someone a question? <div class="right"><input ng-model="site.frequency" maxlength="3" type="number" ngMinimum="0"/> days.</form></div>
							</div>	
							<div class="line-item">
							Can your site users "mute" the questions to hide them forever?
								<div class="line-item-results right">
									<button class="topcoat-button--quiet" ng-click="setAllowMute(true)" ng:class="{true:'active', false:''}[site.allowmute=='1']">Yes</button>
									<button class="topcoat-button--quiet" ng-click="setAllowMute(false)" ng:class="{true:'active', false:''}[site.allowmute=='0']">No</button>
								</div>	
							</div>
						</div>						
						<div class="card-wrap">
							<h2 class="emphasis-heading">Add a new question</h2>
							<form ng-submit="submit()" ng-controller="AdminAreaCtrl" name="questionSubmitForm">
							<div class="charcount" ng-show="questionSubmitForm.text.$valid">{{question.length}} / 140</div>
							<div class="charcount-error" ng-show="questionSubmitForm.text.$error.maxlength">Question is too long!</div>
							<textarea class="topcoat-textarea ask-new-question-input" ng-model="question" name="text" rows="2" cols="" ng-maxlength="140" placeholder="Keep it simple and ask yes or no questions. (140 characters max)" required></textarea>
							<button class="newbutton" id="save-question" ng-disabled="questionSubmitForm.text.$invalid">Save</button>
							</form>
						</div>
						<div class="card-wrap">
							<h2 class="emphasis-heading">Current Questions</h2>
							<!-- <a href="#">active</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#">draft</a> -->

							<div class="line-item" ng-repeat="message in site.messages">
									
								<div class="left">
									<button class="topcoat-button--quiet" ng-click="selectActive($index)" ng:class="{true:'active', false:''}[message.active=='1']">Active</button>
									<button class="topcoat-button--quiet" ng-click="selectDraft($index)" ng:class="{true:'active', false:''}[message.active=='0']">Draft</button>
								</div>
								<div class="right">
									<button class="topcoat-button--quiet" ng-click="editMessage($index)">Edit</button>
									<button class="topcoat-button--quiet delete" ng-click="removeMessage($index)">Delete</button>
									<button class="topcoat-button--quiet" ng-click="resetMessageCount($index)">Reset</button>
								</div>
								<br class="clear" />
								
								<div class="question-wrap left" ng-hide="message.editing">
									{{message.text}}
								   <br><br><button disabled class="newbutton left hide" id="update-question">Update</button>
								</div>
								<br class="clear" />
								<div class="editMessage left" ng-show="message.editing">
									<textarea class="topcoat-textarea" name="text" rows="3" ng-model="message.text" cols="60" ng-maxlength="140" update-model-on-blur>{{message.text}}</textarea><br><br>
									<button class="newbutton" id="update-question" ng-click="updateMessage($index)">Update</button>
									
								</div>
								<!-- results pills -->
								<br class="clear" />
								<div class="line-item-results left">
									<span class="result-label">Viewed</span><span class="pill no views-{{message.id}}">{{message.views + 0}}</span>
									<span ng-show="site.allowmute=='1'">
										<span class="result-label">Muted</span><span class="pill no mute-{{message.id}}">{{message.mute + 0}}</span>
									</span>
								</div>
								<div class="line-item-results right">
									<span class="result-label">Yes</span><span class="pill yes yes-{{message.id}}">{{message.yesVotes}}</span>
									<span class="result-label">No</span><span class="pill no no-{{message.id}}">{{message.noVotes}}</span>
								</div>
								<br class="clear" />
								<div class="timestamp">
									<span ng-show="message.startdate"><strong>Start:</strong> {{message.startdate | date:'mediumDate'}}&nbsp;&nbsp;&nbsp;&nbsp;</span>
									<span ng-show="message.enddate"><strong>End:</strong> {{message.enddate | date: 'mediumDate'}}&nbsp;&nbsp;&nbsp;&nbsp;</span>
									<span ng-show="message.updated"><strong>Last Update:</strong> {{message.updated | date:'medium'}}</span>
								</div>
							</div>

						</div>
					</div>
					<br class="clear" />
				</div>
			</div>
		</div>
	</div>
</div>
